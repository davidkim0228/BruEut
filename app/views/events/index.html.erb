<head>
  <script>
   var initialize_calendar;
   initialize_calendar = function() {
     $('.calendar').each(function() {
       var calendar = $(this);
       calendar.fullCalendar({
         header: {
           left: 'prev, next today',
           center: 'title',
           right: 'month, agendaWeek, agendaDay'
         },
         selectable: true,
         selectHelper: true,
         editable: true,
         eventLimit: true,
         eventTextColor: '#ffffff',
         eventAfterRender: function (event, element, view) {
           if (event.event_type == "Club") {
             //event.color = "#FFB347"; //Em andamento
             element.css('background-color', '#FFB347');
             element.css('border-color', '#FFB347');
           }
           else if (event.event_type == "Holiday") {
             //event.color = "#77DD77"; //Concluído OK
             element.css('background-color', '#77DD77');
             element.css('border-color', '#77DD77');
           }
           else if (event.event_type == "School") {
             //event.color = "#AEC6CF"; //Não iniciado
             element.css('background-color', '#AEC6CF');
             element.css('border-color', '#AEC6CF');
           }
         },
         events: '/events.json'
       });
     })
   };
   $(document).on('turbolinks:load', initialize_calendar);
  </script>
</head>
<body>
  <p id="notice"><%= notice %></p>

  <h1>Events</h1>

  <table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Start time</th>
        <th>End time</th>
        <th>Event type</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @events.each do |event| %>
        <tr>
          <td><%= event.title %></td>
          <td><%= event.description %></td>
          <td><%= event.start_time %></td>
          <td><%= event.end_time %></td>
          <td><%= event.event_type %></td>
          <td><%= link_to 'Show', event %></td>
          <td><%= link_to 'Edit', edit_event_path(event) %></td>
          <td><%= link_to 'Delete', event, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <%= link_to 'New Event', new_event_path %>

  <br />
  <br />
  <br />

  <div class="calendar"></div>
</body>
